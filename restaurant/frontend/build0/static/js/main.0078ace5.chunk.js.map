{"version":3,"sources":["api.js","set-global.js","create-fetcher.js","LandingPage.js","history.js","FoodCart.js","OrderManage.js","FoodManage.js","DeskManage.js","AddFood.js","AddDesk.js","RestaurantManage.js","Login.js","HomePage.js","OrderSuccess.js","Register.js","App.js","serviceWorker.js","index.js"],"names":["api","axios","create","baseURL","withCredentials","window","_","f","cache","clearCache","read","args","key","join","then","val","fetcher","createFetcher","did","get","Deskinfo","info","data","name","title","withRouter","props","useState","custom","setCustom","console","log","rid","match","params","style","width","margin","textAlign","className","fallback","onClick","type","history","push","createHashHistory","imgStyle","float","height","border","menuItemStyle","padding","overflow","MenuItem","food","onUpdate","amount","src","img","alt","desc","price","calcTotalPrice","cartAry","reduce","total","item","CartStatus","expand","setExpend","totalPrice","cart","position","bottom","left","right","background","display","map","id","onPlaceOrder","defaultProps","FoodCart","cartChange","socket","emit","desk","foodChange","updated","produce","state","idx","findIndex","it","splice","setState","placeOrder","post","deskName","deskInfo","customCount","count","foods","res","pathname","foodMenu","this","a","msg","alert","io","path","query","on","order","close","marginBottom","currentAmount","currFoodItem","find","Component","orderItemStyle","OrderItem","onDelete","orderInfo","setOrderInfo","time","timestamp","date","Date","toLocaleString","details","foodInfo","status","put","delete","OrderManage","orders","restaurant","unshift","length","active","paragraph","rows","objectFit","foodInfoStyle","cardStyle","FoodItem","isModify","setIsModify","setFoodInfo","onFoodChange","e","target","value","beforeUpload","file","category","onChange","defaultValue","Item","label","extra","fd","FormData","append","foodRes","catch","setFoods","filter","useEffect","marginTop","to","deskInfoStyle","DeskItem","setDeskInfo","onDeskChange","capacity","deskRes","desks","setDesks","AddFood","propss","preventDefault","goBack","AddDesk","userInfoFetcher","RestaurantInfo","subTitle","document","cookie","href","top","zIndex","component","FoodManage","DeskManage","setName","password","setPassword","captcha","setCaptcha","dir","response","backgroundImage","backgroundRepeat","backgroundSize","transform","backgroundColor","borderRadius","prefix","color","placeholder","homeCardStyle","marginLeft","OrderSuccess","location","confirmPassword","setConfirmPassword","setTitle","email","setEmail","App","exact","HomePage","LandingPage","RestaurantManage","Login","Register","Boolean","hostname","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0078ace5.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nvar api = axios.create({\r\n  baseURL: '/api',\r\n  // baseURL: 'http://10.62.39.224:5000/api',\r\n  withCredentials: true\r\n})\r\n\r\nexport default api","import api from './api';\r\nimport axios from 'axios';\r\nimport _ from 'lodash';\r\n\r\nwindow._ = _\r\nwindow.api = api\r\nwindow.axios = axios","export default function(f) {\r\n  var cache = {}\r\n\r\n  return {\r\n    clearCache() {\r\n      cache = {}\r\n    },\r\n    read(...args) {\r\n      var key = args.join('|')\r\n      if(key in cache) {\r\n        return cache[key]\r\n      } else {\r\n        throw f(...args).then(val => {\r\n          cache[key] = val\r\n        })\r\n      }\r\n    }\r\n  }\r\n}","import React, { Suspense, useState } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport createFetcher from './create-fetcher'\r\nimport api from './api'\r\nimport './LandingPage.css'\r\nimport { Card, Button } from 'antd'\r\n\r\nvar fetcher = createFetcher((did) => {\r\n  return api.get('/deskinfo?did=' + did)\r\n})\r\n\r\n\r\nfunction Deskinfo({did}) {\r\n  var info = fetcher.read(did).data\r\n  return (\r\n    <div>\r\n      <span>{info.name}</span>\r\n      <span>{info.title}</span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(function(props){\r\n  var [custom, setCustom] = useState(0)\r\n\r\n  console.log(props)\r\n\r\n  var rid = props.match.params.rid\r\n  var did = props.match.params.did\r\n  function startOrder() {\r\n    props.history.push(`/r/${rid}/d/${did}/c/${custom}`)\r\n  }\r\n\r\n  return (\r\n  <Card style={{width: '90%', margin: '10px auto', textAlign:'center'}}>\r\n    <div className=\"LandingPage\">\r\n      <Suspense fallback = {<div>正在加载桌面信息</div>}>\r\n        <Deskinfo did={did} />\r\n      </Suspense>\r\n      <h2>请选择人数</h2>\r\n      <ul className=\"custom-count\" style={{width: '300px', margin: '10px auto'}}>\r\n        <li className={custom === 1 ? 'active' : null} onClick={() => setCustom(1)}>1</li>\r\n        <li className={custom === 2 ? 'active' : null} onClick={() => setCustom(2)}>2</li>\r\n        <li className={custom === 3 ? 'active' : null} onClick={() => setCustom(3)}>3</li>\r\n        <li className={custom === 4 ? 'active' : null} onClick={() => setCustom(4)}>4</li>\r\n      </ul>\r\n      <Button type=\"primary\" onClick={startOrder}>开始点餐</Button>\r\n    </div>\r\n  </Card>\r\n  )\r\n})","import { createHashHistory } from 'history'\r\n\r\nconst history = createHashHistory()\r\n\r\nexport default history","import React, { Component, useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport api from './api'\r\nimport { produce } from 'immer'\r\nimport history from './history'\r\nimport io from 'socket.io-client'\r\nimport { Button, Card } from 'antd'\r\n\r\n\r\nvar imgStyle = {\r\n  float: 'left',\r\n  width: '100px',\r\n  height: '100px',\r\n  border: '2px solid',\r\n}\r\nvar menuItemStyle= {\r\n  border:'1px solid',\r\n  padding: '5px',\r\n  margin: '5px',\r\n  overflow:'hidden'\r\n}\r\n\r\nfunction MenuItem({food, onUpdate, amount}) {\r\n  // var [count, setCount] = useState(amount)\r\n  \r\n\r\n  function dec() {\r\n    if(amount === 0) {\r\n      return\r\n    }\r\n    // amount = (amount - 1)\r\n    onUpdate(food, amount - 1)\r\n  }\r\n  function inc() {\r\n    // amount = (amount + 1)\r\n    onUpdate(food, amount + 1)\r\n  }\r\n  return (\r\n    <Card style={menuItemStyle}>\r\n      <h3>{food.name}</h3>\r\n      <div>\r\n        <img style={imgStyle} src={\"/upload/\" + food.img} alt={food.name}/>\r\n        {/* <img style={imgStyle} src={\"http://10.62.39.224:5000/upload/\" + food.img} alt={food.name}/> */}\r\n        <p>简介：{food.desc}</p>\r\n        <p>价格：{food.price}元</p>\r\n      </div>\r\n      <div>\r\n        <Button onClick={dec}>-</Button>\r\n        <span>{amount}件</span>\r\n        <Button onClick={inc}>+</Button>\r\n      </div>\r\n    </Card>\r\n  )\r\n}\r\n\r\nMenuItem.propTypes = {\r\n  food: PropTypes.object.isRequired,\r\n  onUpdate: PropTypes.func,\r\n}\r\n\r\nMenuItem.defaultProps = {\r\n  onUpdate: () => {},\r\n}\r\n\r\n// var menuFetcher = createFetcher(() => {\r\n//   return api.get('/menu/restaurant/1')\r\n// })\r\n\r\n\r\n\r\nfunction calcTotalPrice(cartAry) {\r\n  return cartAry.reduce((total, item) => {\r\n    return total + item.amount * item.food.price\r\n  }, 0)\r\n}\r\n\r\nfunction CartStatus(props) {\r\n  var [expand, setExpend] = useState(false)\r\n\r\n  function toggleExpand(){\r\n    setExpend(!expand)\r\n\r\n  }\r\n\r\n  var totalPrice = calcTotalPrice(props.cart)\r\n\r\n  return(\r\n    <div style={{\r\n      position: 'fixed',\r\n      bottom: '0px',\r\n      border: '1px solid',\r\n      left: '5px',\r\n      right: '5px',\r\n      background: 'pink',\r\n      // transition: 'all 0.5s'\r\n    }}>\r\n      {\r\n        expand ?\r\n        <div  style={{display:'absolute', bottom:'0'}}>\r\n          {props.cart.map(food => (\r\n            <div key={food.food.id}>\r\n              <span>菜品：{food.food.name}</span>\r\n              <br/>\r\n              <span>数量：{food.amount}件</span>\r\n            </div>\r\n          ))}\r\n        </div> :\r\n        ''\r\n      }\r\n      <Button onClick={toggleExpand}>{expand ? '收起' : '展开'}</Button>\r\n      <strong>总价： {totalPrice}元</strong>\r\n      <Button onClick={() => props.onPlaceOrder()}>下单</Button>\r\n    </div>\r\n  )\r\n}\r\n\r\n// export default () => {\r\n//   return (\r\n//     <Suspense fallback={<div>loading...</div>}>\r\n//       <FoodCart />\r\n//     </Suspense>\r\n//   )\r\n// }\r\n\r\nexport default class FoodCart extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      cart: [],\r\n      foodMenu:[],\r\n      deskInfo: {}\r\n    }\r\n  }\r\n\r\n  cartChange = (food, amount) => {\r\n    var params = this.props.match.params\r\n    this.socket.emit('new food', {desk: 'desk:' + params.did, food, amount})\r\n  }\r\n\r\n  foodChange = (food, amount) => {\r\n    var updated = produce(this.state.cart, cart => {\r\n      var idx = cart.findIndex(it => it.food.id === food.id)\r\n      if(idx >= 0) {\r\n        if(amount === 0){\r\n          cart.splice(idx, 1)\r\n        }else {\r\n          cart[idx].amount = amount\r\n        }\r\n      } else {\r\n        cart.push({\r\n          food,\r\n          amount\r\n        })\r\n      }\r\n    })\r\n    this.setState({\r\n      cart: updated\r\n    })\r\n  }\r\n\r\n  placeOrder = () => {\r\n    console.log('下单')\r\n    var params = this.props.match.params\r\n    // {\r\n    //   deskName:\r\n    //   customCount:\r\n    //   totalPrice:\r\n    //   foods: [{id, amount}, {}, {}]\r\n    // }\r\n    console.log(params)\r\n    api.post(`/restaurant/${params.rid}/desk/${params.did}/order`, {\r\n      deskName: this.state.deskInfo.name,\r\n      customCount: params.count,\r\n      totalPrice: calcTotalPrice(this.state.cart),\r\n      foods: this.state.cart,\r\n    }).then(res => {\r\n      history.push({\r\n        pathname: `/r/${params.rid}/d/${params.did}/order-success`,\r\n        state: res.data\r\n      })\r\n    })\r\n  }\r\n\r\n  componentDidMount() {\r\n    var params = this.props.match.params;\r\n    \r\n    (async () => {\r\n        await api.post('/restaurant/' + params.rid + '/food/test', {did: params.did, msg:'test'}).then(res => {\r\n          if(res.data['msg'] === '桌面错误'){\r\n            alert('桌面错误，即将返回登录页面')\r\n            history.push({\r\n              pathname: `/login`,\r\n            })\r\n          }\r\n        })\r\n        await api.get('/menu/restaurant/' + params.rid).then(res => {\r\n          console.log(res)\r\n          this.setState({\r\n            foodMenu: res.data\r\n          })\r\n        })\r\n      }\r\n      ) ()\r\n      \r\n    api.get('/deskinfo?did=' + params.did).then(val => {\r\n      this.setState({\r\n        deskInfo: val.data\r\n      })\r\n      console.log('deskinfo', this.state.deskInfo)\r\n    })\r\n\r\n    // api.get('/menu/restaurant/' + params.rid).then(res => {\r\n    //   console.log(res)\r\n    //   this.setState({\r\n    //     foodMenu: res.data\r\n    //   })\r\n    // })\r\n\r\n    this.socket = io({\r\n    // this.socket = io('ws://10.62.39.224:5000',{\r\n      path: '/desk',\r\n      query: {\r\n        desk: 'desk:' + params.did\r\n      },\r\n    })\r\n\r\n    this.socket.on('connect', () => {\r\n      console.log('connect socket')\r\n      this.socket.emit('join desk', 'desk:' + params.did)\r\n    })\r\n\r\n    this.socket.on('cart food', info => {\r\n      console.log('cart food',info)\r\n      this.setState(produce(state => {\r\n        state.cart.push(...info)\r\n      }))\r\n      console.log('socket cart', this.state.cart)\r\n    })\r\n\r\n    this.socket.on('new food', info => {\r\n      this.foodChange(info.food, info.amount)\r\n    })\r\n\r\n    this.socket.on('placeorder success', order => {\r\n      history.push({\r\n        pathname: `/r/${params.rid}/d/${params.did}/order-success`,\r\n        state: order\r\n      })\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.socket.close()\r\n  }\r\n\r\n  render() {\r\n    \r\n    return (\r\n      <div style={{marginBottom: '45px'}}>\r\n        <div>\r\n          餐厅：{this.state.deskInfo.title}<br/>\r\n          餐桌：{this.state.deskInfo.name}\r\n        </div>\r\n        <h2>您好，欢迎来到{this.state.deskInfo.title}用餐，请在下方点餐，祝您用餐愉快!</h2>\r\n        <div>\r\n          {\r\n            this.state.foodMenu.map(food => {\r\n              var currentAmount = 0\r\n              var currFoodItem = this.state.cart.find(it => it.food.id === food.id)\r\n              if(currFoodItem) {\r\n                currentAmount = currFoodItem.amount\r\n              }\r\n              return <MenuItem key={food.id} food={food} amount={currentAmount} onUpdate={this.cartChange}/>\r\n            })\r\n          }\r\n        </div>\r\n        <div>\r\n          <CartStatus cart={this.state.cart} onUpdate={this.cartChange} onPlaceOrder={this.placeOrder}/>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\n/*\r\nfunction FoodCart1(props) {\r\n  var params = useParams()\r\n\r\n  var [deskInfo, setDeskInfo] = useState(null)\r\n\r\n  var foods = menuFetcher.read().data\r\n  var [cart, setCart] = useState([])\r\n\r\n  useEffect(() => {\r\n    api.get('/deskinfo?did=' + params.did).then(val => {\r\n      setDeskInfo(val.data)\r\n    })\r\n  }, [])\r\n  \r\n\r\n  function foodChange(food, amount) {\r\n    var updated = produce(cart, cart => {\r\n      var idx = cart.findIndex(it => it.food.id === food.id)\r\n      if(idx >= 0) {\r\n        if(amount === 0){\r\n          cart.splice(idx, 1)\r\n        }else {\r\n          cart[idx].amount = amount\r\n        }\r\n      } else {\r\n        cart.push({\r\n          food,\r\n          amount\r\n        })\r\n      }\r\n    })\r\n    setCart(updated)\r\n  }\r\n\r\n  function placeOrder() {\r\n    console.log('下单')\r\n    // {\r\n    //   deskName:\r\n    //   customCount:\r\n    //   totalPrice:\r\n    //   foods: [{id, amount}, {}, {}]\r\n    // }\r\n    console.log(params)\r\n    api.post(`/restaurant/${params.rid}/desk/${params.did}/order`, {\r\n      deskName: deskInfo.name,\r\n      customCount: params.count,\r\n      totalPrice: calcTotalPrice(cart),\r\n      foods: cart,\r\n    }).then(res => {\r\n      history.push({\r\n        pathname: `/r/${params.rid}/d/${params.did}/order-success`,\r\n        state: res.data\r\n      })\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        {\r\n          foods.map(food => {\r\n            return <MenuItem key={food.id} food={food} onUpdate={foodChange}/>\r\n          })\r\n        }\r\n      </div>\r\n      <div>\r\n        <CartStatus cart={cart} onUpdate={foodChange} onPlaceOrder={placeOrder}/>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n*/","import React, { Component, useState } from 'react'\r\nimport io from 'socket.io-client'\r\nimport api from './api'\r\nimport { produce } from 'immer'\r\nimport { Button, Card, Skeleton } from 'antd'\r\n\r\n\r\nvar orderItemStyle = {\r\n  margin: '5px',\r\n  // padding: '5px'\r\n}\r\nfunction OrderItem({order, onDelete}) {\r\n\r\n  var [orderInfo, setOrderInfo] = useState(order)\r\n\r\n  var time = orderInfo.timestamp\r\n  var date = new Date(time).toLocaleString()\r\n  console.log(date)\r\n\r\n  // console.log(orderInfo)\r\n\r\n  function setConfirm() {\r\n    api.put(`restaurant/1/order/${orderInfo.id}`, {\r\n      status: 'confirmed'\r\n    }).then(() => {\r\n      setOrderInfo({\r\n        ...orderInfo,\r\n        status: 'confirmed'\r\n      })\r\n    })\r\n  }\r\n  \r\n  function setComplete() {\r\n    api.put(`restaurant/1/order/${orderInfo.id}`, {\r\n      status: 'completed'\r\n    }).then(() => {\r\n      setOrderInfo({\r\n        ...orderInfo,\r\n        status: 'completed'\r\n      })\r\n    })\r\n  }\r\n  \r\n  function deleteOrder() {\r\n    api.delete(`restaurant/1/order/${orderInfo.id}`).then(() => {\r\n      onDelete(orderInfo)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Card style={orderItemStyle}>\r\n      {/* <div style={orderItemStyle}> */}\r\n        <h2>餐桌：{orderInfo.deskName}</h2>\r\n        <h3>下单时间：{date}</h3>\r\n        {\r\n          orderInfo.details.map( foodInfo => {\r\n            console.log(foodInfo)\r\n            return(\r\n              <ul key={foodInfo.food.id}>\r\n                <li>菜品：{foodInfo.food.name}</li>\r\n                <li>数量：{foodInfo.amount}</li>\r\n              </ul>\r\n            )\r\n          }\r\n          )\r\n        }\r\n        <h3>总价格：{orderInfo.totalPrice}元</h3>\r\n        <h3>人数：{orderInfo.customCount}</h3>\r\n        <h3>订单状态：{orderInfo.status}</h3>\r\n        <div>\r\n          <Button>打印</Button>\r\n          <Button onClick={setConfirm}>确认</Button>\r\n          <Button onClick={setComplete}>完成</Button>\r\n          <Button onClick={deleteOrder}>删除</Button>\r\n        </div>\r\n      {/* </div> */}\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default class OrderManage extends Component{\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      orders: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(this.props)\r\n    this.socket = io({\r\n    // this.socket = io('ws://10.62.39.224:5000', {\r\n      path: '/restaurant',\r\n      query: {\r\n        restaurant: 'restaurant:' + this.props.match.params.rid\r\n      }\r\n    })\r\n\r\n    this.socket.on('new order', order => {\r\n      this.setState(produce(state => {\r\n        state.orders.unshift(order)\r\n      }))\r\n    })\r\n\r\n    api.get('restaurant/1/order').then(res => {\r\n      this.setState(produce(state => {\r\n        state.orders = res.data\r\n      }))\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.socket.close()\r\n  }\r\n\r\n  onDelete = (order) => {\r\n    var idx = this.state.orders.findIndex(it => it.id === order.id)\r\n    this.setState(produce(state => {\r\n      state.orders.splice(idx, 1)\r\n    }))\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>订单管理</h2>\r\n        <div>\r\n          {\r\n            this.state.orders.length > 0 ?\r\n            this.state.orders.map(order => {\r\n              return <OrderItem onDelete={this.onDelete} key={order.id} order={order} />\r\n            }) :\r\n            <div>\r\n              <Skeleton active paragraph={{ rows: 8 }} />\r\n              <Skeleton active paragraph={{ rows: 8 }} />\r\n            </div>\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  } \r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport api from './api'\r\nimport { Button, Card, Form, Input, Icon, Upload } from 'antd'\r\n\r\n\r\nvar imgStyle = {\r\n  float: 'left',\r\n  border: '1px solid',\r\n  width: '100px',\r\n  height: '100px',\r\n  objectFit: 'cover'\r\n}\r\n\r\nvar foodInfoStyle = {\r\n  overflow: 'hidden'\r\n}\r\n\r\nvar cardStyle = {\r\n  padding: '5px',\r\n  margin: '5px'\r\n}\r\n\r\nfunction FoodItem({food, onDelete}) {\r\n  var [isModify, setIsModify] = useState(false)\r\n  var [foodInfo, setFoodInfo] = useState(food)\r\n  function onFoodChange(e){\r\n    setFoodInfo({\r\n      ...foodInfo,\r\n      [e.target.name]: e.target.value\r\n    })\r\n    console.log(foodInfo)\r\n  }\r\n  // function imgChange(e) {\r\n  //   console.log(e.fileList)\r\n  //   setFoodInfo({\r\n  //     ...foodInfo,\r\n  //     img: e.target.files[0]\r\n  //   })\r\n  // }\r\n  function save(){\r\n    setIsModify(false)\r\n    var fd = new FormData()\r\n    for(var key in foodInfo){\r\n      var val = foodInfo[key]\r\n      fd.append(key, val)\r\n    }\r\n    api.put('/restaurant/1/food/' + food.id, fd).then(foodRes => setFoodInfo(foodRes.data)).catch(e => {console.log('修改发生错误')})\r\n  }\r\n  function deleteFood(){\r\n    api.delete('/restaurant/1/food/' + food.id).then(() => {onDelete(food.id)})\r\n  }\r\n  function toggleStatus(){\r\n    foodInfo.status === 'on' ? foodInfo.status = 'off' : foodInfo.status = 'on'\r\n    api.put('/restaurant/1/food/' + food.id, foodInfo).then(foodRes => setFoodInfo(foodRes.data)).catch(e => {console.log('修改发生错误')})\r\n  }\r\n\r\n  const props = {\r\n    beforeUpload: file => {\r\n    setFoodInfo({\r\n      ...foodInfo,\r\n      img: file\r\n    })\r\n      return false;\r\n    },\r\n  };\r\n\r\n  if(foodInfo){\r\n    return (\r\n      <Card style={cardStyle}>\r\n         <h3>{foodInfo.name}</h3>\r\n         <div style={foodInfoStyle}>\r\n           <img src={'/upload/' + foodInfo.img} alt={foodInfo.name} style={imgStyle}/>\r\n           {/* <img src={'http://10.62.39.224:5000/upload/' + foodInfo.img} alt={foodInfo.name} style={imgStyle}/> */}\r\n           <p>介绍：{foodInfo.desc}</p>\r\n           <p>价格：{foodInfo.price}元</p>\r\n           <p>上架状态：{foodInfo.status === 'on' ? '已上架' : '已下架'}</p>\r\n           <p>分类：{foodInfo.category ? foodInfo.category : '[暂未分类]'}</p>\r\n         </div>\r\n         {\r\n           isModify ?\r\n           <div>\r\n             <Form>\r\n               名称：<Input type=\"text\" onChange={onFoodChange} defaultValue={foodInfo.name} name=\"name\"/><br/>\r\n               介绍：<Input type=\"text\" onChange={onFoodChange} defaultValue={foodInfo.desc} name=\"desc\"/><br/>\r\n               价格：<Input type=\"text\" onChange={onFoodChange} defaultValue={foodInfo.price} name=\"price\"/><br/>\r\n               分类：<Input type=\"text\" onChange={onFoodChange} defaultValue={foodInfo.category} name=\"category\"/><br/>\r\n               <Form.Item label=\"Upload\" extra=\"图片上传\">\r\n                <Upload  {...props}>\r\n                  <Button>\r\n                    <Icon type=\"upload\" /> Click to Upload\r\n                  </Button>\r\n                </Upload>\r\n               </Form.Item>\r\n               {/* 图片：<Input type=\"file\" onChange={imgChange} name=\"img\"/><br/> */}\r\n             </Form>\r\n           </div> : ''\r\n         }\r\n         <div>\r\n           <Button onClick={() => setIsModify(true)}>修改</Button>\r\n           <Button onClick={save}>保存</Button>\r\n           <Button onClick={toggleStatus}>{foodInfo.status === 'off' ? '上架' : '下架'}</Button>\r\n           <Button onClick={deleteFood}>删除</Button>\r\n         </div>\r\n      </Card>\r\n    )\r\n  } else {\r\n    return \r\n  }\r\n}\r\n\r\n\r\n\r\nexport default function(props){\r\n  var [foods, setFoods] = useState([])\r\n  useEffect(() => {\r\n    api.get(`/restaurant/${props.match.params.rid}/food`).then(res => setFoods(res.data))\r\n  }, [props.match.params.rid])\r\n  function onDelete(id){\r\n    setFoods(foods.filter(food => food.id !== id))\r\n  }\r\n  console.log(foods)\r\n  return (\r\n    <div>\r\n      <div style={{marginTop:'10px'}}>\r\n        <Button>\r\n          <Link to=\"add-food\">添加菜品</Link>\r\n        </Button>\r\n      </div>\r\n      <div>\r\n        {\r\n          foods.map(food => {\r\n            return <FoodItem onDelete={onDelete} key={food.id} food={food}/>\r\n          })\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport api from './api'\r\nimport { Button, Card, Form, Input } from 'antd'\r\n\r\n\r\nvar deskInfoStyle = {\r\n  overflow: 'hidden'\r\n}\r\n\r\nvar cardStyle = {\r\n  padding: '5px',\r\n  margin: '5px'\r\n}\r\n\r\nfunction DeskItem({desk, onDelete}) {\r\n  var [isModify, setIsModify] = useState(false)\r\n  var [deskInfo, setDeskInfo] = useState(desk)\r\n  function onDeskChange(e){\r\n    setDeskInfo({\r\n      ...deskInfo,\r\n      [e.target.name]: e.target.value\r\n    })\r\n    console.log(deskInfo)\r\n  }\r\n\r\n  function save(){\r\n    setIsModify(false)\r\n    api.put('/restaurant/1/desk/' + desk.id, deskInfo).then(deskRes => setDeskInfo(deskRes.data)).catch(e => {console.log('修改发生错误')})\r\n  }\r\n  function deleteDesk(){\r\n    api.delete('/restaurant/1/desk/' + desk.id).then(() => {onDelete(desk.id)})\r\n  }\r\n\r\n  if(deskInfo){\r\n    return (\r\n      <Card style={cardStyle}>\r\n         <h3>桌面名称：{deskInfo.name}</h3>\r\n         <h3>桌面ID：{deskInfo.id}</h3>\r\n         <div style={deskInfoStyle}>\r\n           <p>最大容纳人数：{deskInfo.capacity}人</p>\r\n         </div>\r\n         {\r\n           isModify ?\r\n           <div>\r\n             <Form>\r\n               名称：<Input type=\"text\" onChange={onDeskChange} defaultValue={deskInfo.name} name=\"name\"/><br/>\r\n               最大容纳人数：<Input type=\"text\" onChange={onDeskChange} defaultValue={deskInfo.capacity} name=\"capacity\"/><br/>\r\n             </Form>\r\n           </div> : ''\r\n         }\r\n         <div>\r\n           <Button onClick={() => setIsModify(true)}>修改</Button>\r\n           <Button onClick={save}>保存</Button>\r\n           <Button onClick={deleteDesk}>删除</Button>\r\n         </div>\r\n      </Card>\r\n    )\r\n  } else {\r\n    return \r\n  }\r\n}\r\n\r\n\r\nexport default function(props){\r\n  var [desks, setDesks] = useState([])\r\n  useEffect(() => {\r\n    api.get(`/restaurant/${props.match.params.rid}/desk`).then(res => setDesks(res.data))\r\n  }, [props.match.params.rid])\r\n  function onDelete(id){\r\n    setDesks(desks.filter(desk => desk.id !== id))\r\n  }\r\n  console.log(desks)\r\n  return (\r\n    <div>\r\n      <div style={{marginTop:'10px'}}>\r\n        <Button>\r\n          <Link to=\"add-desk\">添加桌面</Link>\r\n        </Button>\r\n      </div>\r\n      <div>\r\n        {\r\n          desks.map(desk => {\r\n            return <DeskItem onDelete={onDelete} key={desk.id} desk={desk}/>\r\n          })\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, {useState} from 'react'\r\nimport api from './api'\r\nimport history from './history'\r\nimport { Button, Card, Form, Input, Icon, Upload } from 'antd'\r\n\r\nfunction AddFood(props) {\r\n  var [foodInfo, setFoodInfo] = useState({\r\n    name: '',\r\n    desc: '',\r\n    price: 0,\r\n    category: '',\r\n    status: 'on',\r\n    img: null\r\n  })\r\n\r\n  function onFoodChange(e){\r\n    setFoodInfo({\r\n      ...foodInfo,\r\n      [e.target.name]: e.target.value\r\n    })\r\n    console.log(foodInfo)\r\n  }\r\n\r\n  // function imgChange(e) {\r\n  //   setFoodInfo({\r\n  //     ...foodInfo,\r\n  //     img: e.target.files[0]\r\n  //   })\r\n  // }\r\n\r\n  function submit(e){\r\n    e.preventDefault()\r\n    var fd = new FormData()\r\n    for(var key in foodInfo){\r\n      var val = foodInfo[key]\r\n      fd.append(key, val)\r\n    }\r\n    api.post('/restaurant/1/food', fd).then(res => {\r\n      history.goBack()\r\n    })\r\n  }\r\n\r\n  const propss = {\r\n    beforeUpload: file => {\r\n    setFoodInfo({\r\n      ...foodInfo,\r\n      img: file\r\n    })\r\n      return false;\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Card style={{width:'800px'}}>\r\n        <h2>添加菜品</h2>\r\n        <Form style={{width:'500px'}}>\r\n          名称：<Input type=\"text\" onChange={onFoodChange} defaultValue={foodInfo.name} name=\"name\"/><br/>\r\n          介绍：<Input type=\"text\" onChange={onFoodChange} defaultValue={foodInfo.desc} name=\"desc\"/><br/>\r\n          价格：<Input type=\"text\" onChange={onFoodChange} defaultValue={foodInfo.price} name=\"price\"/><br/>\r\n          分类：<Input type=\"text\" onChange={onFoodChange} defaultValue={foodInfo.category} name=\"category\"/><br/>\r\n          <Form.Item label=\"Upload\" extra=\"图片上传\">\r\n            <Upload  {...propss}>\r\n              <Button>\r\n                <Icon type=\"upload\" /> Click to Upload\r\n              </Button>\r\n            </Upload>\r\n          </Form.Item>\r\n          {/* 图片：<Input type=\"file\" onChange={imgChange} name=\"img\"/><br/> */}\r\n          <Button onClick={submit} type='primary'>提交</Button>\r\n        </Form>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddFood","import React, {useState} from 'react'\r\nimport api from './api'\r\nimport history from './history'\r\nimport { Button, Card, Form, Input } from 'antd'\r\n\r\nfunction AddDesk(props) {\r\n  var [deskInfo, setDeskInfo] = useState({\r\n    name: '',\r\n    capacity: 0\r\n  })\r\n\r\n  function onDeskChange(e){\r\n    setDeskInfo({\r\n      ...deskInfo,\r\n      [e.target.name]: e.target.value\r\n    })\r\n    console.log(deskInfo)\r\n  }\r\n\r\n  function submit(e){\r\n    e.preventDefault()\r\n    api.post('/restaurant/1/desk', deskInfo).then(res => {\r\n      history.goBack()\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Card style={{width:'800px'}}>\r\n        <h2>添加桌面</h2>\r\n        <Form style={{width:'500px'}}>\r\n          名称：<Input type=\"text\" onChange={onDeskChange} defaultValue={deskInfo.name} name=\"name\"/><br/>\r\n          最大容纳人数：<Input type=\"text\" onChange={onDeskChange} defaultValue={deskInfo.capacity} name=\"capacity\"/><br/>\r\n          <Button onClick={submit} type='primary'>提交</Button>\r\n        </Form>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddDesk","import React, { Suspense } from 'react'\r\nimport { Route, Switch, withRouter } from 'react-router-dom'\r\nimport OrderManage from './OrderManage'\r\nimport FoodManage from './FoodManage'\r\nimport DeskManage from './DeskManage'\r\nimport AddFood from './AddFood'\r\nimport AddDesk from './AddDesk'\r\nimport api from './api'\r\nimport history from './history'\r\nimport createFetcher from './create-fetcher'\r\nimport { PageHeader, Breadcrumb, Icon, Button } from 'antd'\r\n\r\nconst userInfoFetcher = createFetcher(async () => {\r\n  return api.get('/userinfo').catch(() => {\r\n    history.push('/')\r\n  })\r\n})\r\n\r\n\r\n// function RestaurantInfo() {\r\n//   var history = useHistory()\r\n//   var [info, setInfo] = useState(null)\r\n//   useEffect(() => {\r\n//   (async () => {\r\n//     try {\r\n//       let response = await api.get('/userinfo')\r\n//       setInfo(response.data)\r\n//     } catch(e) {\r\n//       history.push('/')\r\n//     }\r\n//   })()},[history])\r\n//   // var info = userInfoFetcher.read()\r\n//   console.log(info)\r\n//     return (\r\n//       <div>\r\n//         {\r\n//           info &&\r\n//           '欢迎：' + info.title\r\n//         }\r\n//       </div>\r\n//     )\r\n// }\r\nfunction RestaurantInfo(props) {\r\n  var info = userInfoFetcher.read()\r\n  return (\r\n    <PageHeader\r\n    style={{\r\n      border: '1px solid rgb(235, 237, 240)',\r\n    }}\r\n    title=\"欢迎\"\r\n    subTitle={info.data.title}\r\n  />\r\n  )\r\n  // return (\r\n  //   <div>\r\n  //     {\r\n  //       info &&\r\n  //       '欢迎：' + info.data.title\r\n  //     }\r\n  //   </div>\r\n  // )\r\n}\r\n\r\nexport default withRouter(function(props) {\r\n  async function logout() {\r\n    await api.get('/logout')\r\n    userInfoFetcher.clearCache()\r\n    props.history.push('/')\r\n  }\r\n  console.log(props)\r\n\r\n  if(document.cookie === ''){\r\n    history.push('/')\r\n  }\r\n\r\n  var logoutStyle = {\r\n    position: 'fixed',\r\n    right: '5px',\r\n    top: '5px',\r\n    zIndex: '10'\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Suspense fallback={<div>loading...</div>}>\r\n        <RestaurantInfo history={history}/>\r\n      </Suspense>\r\n\r\n      <Breadcrumb>\r\n        <Breadcrumb.Item href={`#/restaurant/${props.match.params.rid}/manage`}>\r\n          <Icon type=\"home\" />\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item href={`#/restaurant/${props.match.params.rid}/manage/order`}>\r\n          <Icon type=\"shopping-cart\" />\r\n          <span>订单管理</span>\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item href={`#/restaurant/${props.match.params.rid}/manage/food`}>\r\n          <Icon type=\"coffee\" />\r\n          <span>菜品管理</span>\r\n        </Breadcrumb.Item>\r\n        <Breadcrumb.Item href={`#/restaurant/${props.match.params.rid}/manage/desk`}>\r\n          <Icon type=\"solution\" />\r\n          <span>桌面管理</span>\r\n        </Breadcrumb.Item>\r\n      </Breadcrumb>\r\n      <Button type=\"danger\" style={logoutStyle} onClick={logout}>退出</Button>\r\n      {/* <nav>\r\n        <ul>\r\n          <li>\r\n            <Link to={`/restaurant/${props.match.params.rid}/manage/order`}>订单管理</Link>\r\n          </li>\r\n          <li>\r\n            <Link to={`/restaurant/${props.match.params.rid}/manage/food`}>菜品管理</Link>\r\n          </li>\r\n          <li>\r\n            <Link to={`/restaurant/${props.match.params.rid}/manage/desk`}>桌面管理</Link>\r\n          </li>\r\n          <li>\r\n            <button onClick={logout}>退出</button>\r\n          </li>\r\n        </ul>\r\n      </nav> */}\r\n      <main>\r\n        <Switch>\r\n          <Route path=\"/restaurant/:rid/manage/order\" component={OrderManage}></Route>\r\n          <Route path=\"/restaurant/:rid/manage/food\" component={FoodManage}></Route>\r\n          <Route path=\"/restaurant/:rid/manage/desk\" component={DeskManage}></Route>\r\n          <Route path=\"/restaurant/:rid/manage/add-food\" component={AddFood}></Route>\r\n          <Route path=\"/restaurant/:rid/manage/add-desk\" component={AddDesk}></Route>\r\n        </Switch>\r\n      </main>\r\n    </div>\r\n  )\r\n})","import React, { useState } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport api from './api'\r\nimport { Form, Input, Button, Icon } from 'antd'\r\n\r\nexport default withRouter(function(props){\r\n  // var nameRef = useRef()\r\n  // var passwordRef = useRef()\r\n  // var captchaRef = useRef()\r\n  var [name, setName] = useState()\r\n  var [password, setPassword] = useState()\r\n  var [captcha, setCaptcha] = useState()\r\n  console.log(props)\r\n  \r\n  function handleName(e){\r\n    setName(e.target.value)\r\n  }\r\n  function handlePass(e){\r\n    setPassword(e.target.value)\r\n  }\r\n  function handleCaptcha(e){\r\n    setCaptcha(e.target.value)\r\n  }\r\n  async function login(e) {\r\n    e.preventDefault()\r\n    // var name = nameRef.current.value\r\n    // var password = passwordRef.current.value\r\n    // var captcha = captchaRef.current.value\r\n\r\n    console.log('发送信息', name, password, captcha)\r\n    try {\r\n      var res = await api.post('/login', {name, password, captcha})\r\n      console.log('res',res)\r\n      props.history.push(`/restaurant/${res.data.id}/manage`)\r\n    } catch(e) {\r\n      console.dir(e)\r\n      if(e.response.data.msg){\r\n        alert(e.response.data.msg)\r\n      }\r\n    }\r\n  }\r\n  var cardStyle={\r\n    position: 'fixed',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translateX(-50%) translateY(-50%)',\r\n    width: '250px',\r\n    textAlign:'center',\r\n    border: '1px solid #fbfbfb',\r\n    backgroundColor: '#fbfbfb',\r\n    borderRadius: '4px',\r\n    zIndex: '10'\r\n  }\r\n  var backgroundStyle = {\r\n    width: 'calc(100% + 10px)',\r\n    height: 'calc(100% + 10px)',\r\n    backgroundImage: 'url(http://img.1ppt.com/uploads/allimg/1803/1_180319154959_1.JPG)',\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundSize: 'cover',\r\n    filter: 'blur(4px)',\r\n    margin: '-5px -5px'\r\n  }\r\n  return (\r\n    <div style={{width: '100%',height: '100%', overflow: 'hidden'}}>\r\n      <div style={backgroundStyle}></div>\r\n      <div style={cardStyle}>\r\n        <h2 style={{display: 'inline-block'}}>餐厅管理员登录</h2>\r\n        <Form className=\"login-form\">\r\n          <Input \r\n            prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} \r\n            type=\"text\" onChange={handleName} placeholder=\"username\"\r\n          />\r\n          <Input \r\n            prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} \r\n            type=\"password\" placeholder=\"password\"  onChange={handlePass}\r\n          />\r\n          <img src=\"/api/captcha\" alt=\"captcha\"/>\r\n          {/* <img src=\"http://10.62.39.224:5000/api/captcha\" alt=\"captcha\"/> */}\r\n          <Input type=\"text\" placeholder=\"请输入验证码\" onChange={handleCaptcha}/>\r\n          <Button type=\"primary\" style={{marginTop: '5px', width: '250px'}} onClick={login}>登录</Button>\r\n        </Form>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n})","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Card, Button } from 'antd'\r\nimport 'antd/dist/antd.css';\r\n\r\nvar homeCardStyle = {\r\n  marginTop: '100px',\r\n  float: 'left',\r\n  width:'200px',\r\n  height: '200px',\r\n  marginLeft: '50%',\r\n  transform: 'translateX(-50%)'\r\n}\r\n\r\nexport default function(){\r\n  return <Card style={homeCardStyle}>\r\n    <div style={{width: '100px', margin: 'auto', padding: '39px 0px'}}>\r\n      <Button type=\"primary\" style={{width: '100px', marginBottom:'10px'}}>\r\n        <Link to=\"/login\">登录页面</Link>\r\n      </Button>\r\n      <br/>\r\n      <Button type=\"primary\" style={{width: '100px'}}>\r\n        <Link to=\"/register\">注册页面</Link>\r\n      </Button>\r\n    </div>\r\n  </Card>\r\n}","import React from 'react'\r\n\r\nexport default function OrderSuccess(props) {\r\n  console.log(props)\r\n  return (\r\n    <div>\r\n      <h2>下单成功</h2>\r\n      <p>总价：{props.location.state && props.location.state.totalPrice}元</p>\r\n    </div>\r\n  ) \r\n}","import React, { useState } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport api from './api'\r\nimport { Form, Input, Button, Icon } from 'antd'\r\n\r\nexport default withRouter(function(props){\r\n  // var nameRef = useRef()\r\n  // var passwordRef = useRef()\r\n  // var captchaRef = useRef()\r\n  var [name, setName] = useState()\r\n  var [password, setPassword] = useState()\r\n  var [confirmPassword, setConfirmPassword] = useState()\r\n  var [title, setTitle] = useState()\r\n  var [email, setEmail] = useState()\r\n  console.log(props)\r\n  \r\n  function handleName(e){\r\n    setName(e.target.value)\r\n  }\r\n  function handlePass(e){\r\n    setPassword(e.target.value)\r\n  }\r\n  function handleConfirmPass(e) {\r\n    setConfirmPassword(e.target.value)\r\n  }\r\n  function handleTitle(e) {\r\n    setTitle(e.target.value)\r\n  }\r\n  function handleEmail(e) {\r\n    setEmail(e.target.value)\r\n  }\r\n  async function login(e) {\r\n    e.preventDefault()\r\n    // var name = nameRef.current.value\r\n    // var password = passwordRef.current.value\r\n    // var captcha = captchaRef.current.value\r\n    if(confirmPassword !== password){\r\n      alert('请确认密码')\r\n      return\r\n    }\r\n    console.log('发送信息', name, password)\r\n    try {\r\n      var res = await api.post('/register', {name, email, password, title})\r\n      console.log('res',res)\r\n      props.history.push(`/login`)\r\n    } catch(e) {\r\n      console.dir(e)\r\n      alert(e.response.data.msg)\r\n    }\r\n  }\r\n  var cardStyle={\r\n    position: 'fixed',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translateX(-50%) translateY(-50%)',\r\n    width: '250px',\r\n    textAlign:'center',\r\n    border: '1px solid #fbfbfb',\r\n    backgroundColor: '#fbfbfb',\r\n    borderRadius: '4px',\r\n    zIndex: '10'\r\n  }\r\n  var backgroundStyle = {\r\n    width: 'calc(100% + 10px)',\r\n    height: 'calc(100% + 10px)',\r\n    backgroundImage: 'url(http://img.1ppt.com/uploads/allimg/1803/1_180319154959_1.JPG)',\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundSize: 'cover',\r\n    filter: 'blur(4px)',\r\n    margin: '-5px -5px'\r\n  }\r\n  return (\r\n    <div style={{width: '100%',height: '100%', overflow: 'hidden'}}>\r\n      <div style={backgroundStyle}></div>\r\n      <div style={cardStyle}>\r\n        <h2 style={{display: 'inline-block'}}>餐厅管理员注册</h2>\r\n        <Form className=\"login-form\">\r\n          <Input \r\n            prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} \r\n            type=\"text\" onChange={handleName} placeholder=\"用户名\"\r\n          />\r\n          <Input \r\n            prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} \r\n            type=\"text\" onChange={handleTitle} placeholder=\"餐厅名\"\r\n          />\r\n          <Input \r\n            prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} \r\n            type=\"text\" onChange={handleEmail} placeholder=\"邮箱\"\r\n          />\r\n          <Input \r\n            prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} \r\n            type=\"password\" placeholder=\"密码\"  onChange={handlePass}\r\n          />\r\n          <Input \r\n            prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} \r\n            type=\"password\" placeholder=\"确认密码\"  onChange={handleConfirmPass}\r\n          />\r\n          <Button type=\"primary\" style={{marginTop: '5px', width: '250px'}} onClick={login}>注册</Button>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  )\r\n})","import React from 'react';\nimport './App.css';\nimport { Router, Route, Switch } from 'react-router-dom';\nimport LandingPage from './LandingPage';\nimport FoodCart from './FoodCart';\nimport RestaurantManage from './RestaurantManage';\nimport Login from './Login';\nimport HomePage from './HomePage';\nimport OrderSuccess from './OrderSuccess'\nimport Register from './Register'\nimport history from './history'\n\n// 用户侧\n// 登录\n// 扫码进入页面，选择人数 /landing/restaurant/35/desk/20\n// 点餐页面/restaurant/35/desk/20\n// 点餐成功页面\n\n// 商户侧\n// 登录\n// 订单管理: /manage/orders\n// 订单详情页面: /manage/order/35\n// 菜品管理: /manage/food\n// 桌面管理: /manage/desk\n\nfunction App() {\n  return (\n    <Router history={history}>\n      <Switch>\n        <Route path=\"/\" exact component={HomePage} />\n        <Route path=\"/landing/r/:rid/d/:did\" component={LandingPage} />\n        <Route path=\"/r/:rid/d/:did/c/:count\" component={FoodCart} />\n        <Route path=\"/r/:rid/d/:did/order-success\" component={OrderSuccess} />\n        <Route path=\"/restaurant/:rid/manage\" component={RestaurantManage} />\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/register\" component={Register} />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './set-global'\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}